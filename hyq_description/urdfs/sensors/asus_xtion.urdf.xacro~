<?xml version="1.0"?>
<root xmlns:xacro="http://www.ros.org/wiki/xacro">



	<xacro:include filename="$(find hyq_description)/urdfs/sensors/asus_xtion.gazebo.xacro" />


	<!-- ===================================== ASUS & PROSILICA ==================================== -->
	<!-- The xacro macro xacro:asus_xtion_camera contains: asus xtion and prosilica combo -->
	<xacro:macro name="asus_xtion_camera" params="name parent *origin">

		<!-- Joints -->
		<joint name="${name}_joint" type="fixed">
			<insert_block name="origin"/>
			<parent link="${parent}"/>
			<child link="${name}_asus_xtion_link"/>
		</joint>
		<!-- asus ir sensor physical attachment -->
		<joint name="${name}_asus_xtion_ir_joint" type="fixed">
			<origin xyz="${asus_xtion_x} -${asus_xtion_ir_y} ${asus_xtion_z}" rpy="0.0 0.0 0.0"/>
			<parent link="${name}_asus_xtion_link"/>
			<child link="${name}_asus_xtion_ir_link"/>
		</joint>
		<!-- asus xtion ir sensor frame -->
		<joint name="${name}_asus_xtion_ir_optical_frame_joint" type="fixed">
			<origin xyz="0 0 0"	rpy="${asus_xtion_roll} ${asus_xtion_pitch} ${asus_xtion_yaw}"/>
			<parent link="${name}_asus_xtion_ir_link"/>
			<child link="${name}_asus_xtion_ir_optical_frame"/>
		</joint>
		<!-- asus_xtion rgb sensor physical attachment -->
		<joint name="${name}_asus_xtion_rgb_joint" type="fixed">
			<origin xyz="${asus_xtion_x} ${asus_xtion_rgb_y} ${asus_xtion_z}" rpy="0.0 0.0 0.0"/>
			<parent link="${name}_asus_xtion_link"/>
			<child link="${name}_asus_xtion_rgb_link"/>
		</joint>
		<!-- asus xtion rgb sensor frame -->
		<joint name="${name}_asus_xtion_rgb_optical_frame_joint" type="fixed">
			<origin xyz="0 0 0"	rpy="${asus_xtion_roll} ${asus_xtion_pitch} ${asus_xtion_yaw}"/>
			<parent link="${name}_asus_xtion_rgb_link"/>
			<child link="${name}_asus_xtion_rgb_optical_frame"/>
		</joint>
		<!-- prosilica sensor physical attachment -->
<!--		<joint name="${name}_asus_xtion_prosilica_joint" type="fixed">
			<origin xyz="${asus_xtion_x} ${asus_xtion_rgb_y} ${asus_xtion_z}" rpy="0.0 0.0 0.0"/>
			<parent link="${name}_link"/>
			<child link="${name}_prosilica_link"/>
		</joint>-->
		<!-- prosilica sensor frame -->
<!--		<joint name="${name}_prosilica_optical_frame_joint" type="fixed">
			<origin xyz="${cal_high_def_x} ${cal_high_def_y} ${cal_high_def_z}"
					rpy="${-PI/2+cal_high_def_roll} ${0.0+cal_high_def_pitch} ${-PI/2+cal_high_def_yaw}" />
			<parent link="${name}_prosilica_link"/>
			<child link="${name}_prosilica_optical_frame"/>
		</joint>-->



		<!-- Links -->
		<link name="${name}_asus_xtion_link">
			<inertial>
				<mass value="0.1"/>
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
			</inertial>
			<visual>
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<geometry>
					<mesh filename="package://hyq_description/meshes/sensors/asus_xtion.dae" scale="1 1 1" />
				</geometry>
				<material name="gray">
					<color rgba="0.5 0.5 0.5 1"/>
				</material>
			</visual>
			<collision>
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<geometry>
					<sphere radius="0.0005"/>
				</geometry>
			</collision>
		</link>
		<!-- ir sensor link -->
		<link name="${name}_asus_xtion_ir_link">
			<inertial>
				<mass value="0.1" />
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
			</inertial>
			<visual>
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<geometry>
					<sphere radius="0.0005"/>
				</geometry>
			</visual>
			<collision>
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<geometry>
					<sphere radius="0.0005"/>
				</geometry>
			</collision>
		</link>
		<!-- ir optical sensor link -->
		<link name="${name}_asus_xtion_ir_optical_frame"/>
		<!-- rgb sensor link -->
		<link name="${name}_asus_xtion_rgb_link" >
			<inertial>
				<mass value="0.1" />
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01" />
			</inertial>
			<visual>
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<geometry>
					<sphere radius="0.0005"/>
				</geometry>
			</visual>
			<collision>
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<geometry>
					<sphere radius="0.0005"/>
				</geometry>
			</collision>
		</link>
		<!-- rgb optical sensor link -->
		<link name="${name}_asus_xtion_rgb_optical_frame"/>
<!--
		<link name="${name}_prosilica_link">
			<inertial>
				<mass value="0.1"/>
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
			</inertial>
			<visual>
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<geometry>
					<sphere radius="0.0005"/>
				</geometry>
			</visual>
			<collision>
				<origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
				<geometry>
					<sphere radius="0.0005"/>
				</geometry>
			</collision>
		</link>

		<link name="${name}_prosilica_optical_frame"/>-->

	<!-- gazebo extensions -->
	<xacro:asus_xtion_ir_sensor link_name="${name}_asus_xtion_ir_link" frame_name="${name}_asus_xtion_ir_optical_frame" camera_name="${name}_asus_xtion" />

	<xacro:asus_xtion_rgb_sensor link_name="${name}_asus_xtion_rgb_link" frame_name="${name}_asus_xtion_rgb_optical_frame" camera_name="${name}_asus_xtion" />
<!--
    <xacro:prosilica_cam_sensor link_name="${name}_prosilica_link" camera_name="prosilica_camera" frame_name="${name}_prosilica_optical_frame" />
-->

    <!-- plugin for updating structure pose \
<xacro:asus_xtion_prosilica_gazebo joint_name="${name}_asus_xtion_prosilica_joint" link_name="${name}_asus_xtion_prosilica_link" /> -->
	</xacro:macro>

</root>
